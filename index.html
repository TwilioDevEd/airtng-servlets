<!DOCTYPE html><html><head><title>Workflow Automation</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Workflow Automation"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Workflow Automation</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Increase your rate of response by automating the workflows that are key to your business. In this tutorial, learn how to build a ready-for-scale automated SMS workflow, for a vacation rental company.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Workflow Automation" class="chapter"><div data-title="Introduction" data-file="src/main/webapp/WEB-INF/web.xml" data-format="xml" class="step"><h2 id="workflow-automation-vacation-rental-example">Workflow Automation - Vacation Rental Example</h2>
<p><img src="http://howtodocs.s3.amazonaws.com/airtng-screen.png" alt="Airtng"></p>
<p>At its core this use-case is about enabling your service providers
(agents, hosts, customer service reps, administrators, etc) to better
serve their customer. To illustrate a very real-world example of this
use-case we will implement a webapp for finding and booking vacation
properties we&#39;re calling it Airtng. Here&#39;s how it works:</p>
<ol>
<li>A host creates a vacation property.</li>
<li>A guest requests a reservation on that property</li>
<li>The host receives an SMS notifying them of the recent reservation request. The host can either Accept or Reject the reservation.</li>
<li>The guest is notified that their reservation was either accepted or rejected.</li>
</ol>
<h2 id="building-blocks">Building Blocks</h2>
<p>We&#39;ll be using the Twilio REST API to send our users messages at important junctures:</p>
<ul>
<li><a href="//www.twilio.com/docs/api/rest/sending-messages">Sending Messages with Twilio API</a></li>
</ul>
<p>and Java Servlets + <a href="//github.com/gradle/gradle">Gradle</a> + <a href="//docs.gradle.org/current/userguide/userguide_single.html#jetty_plugin">Jetty</a>
as our web technology stack:</p>
<ul>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnafd.html">Getting Started with Java Servlets</a></li>
<li><a href="//gradle.org/getting-started-gradle-java/">Getting Started with Gradle Java/JVM</a></li>
</ul>
<p>Let&#39;s get started! Click the right arrow to move on to the next step of
the tutorial.</p>
</div><div data-title="Users and Session Management" data-file="src/main/java/org/twilio/airtng/models/User.java" data-highlight="7-48" class="step"><h2 id="users-and-session-management">Users and Session Management</h2>
<p>For this workflow to work, we need to have users created in our application,
and allow them to log in into airtng.
Each user will hold his personal information, which will be required when the
moment to send SMS notifications comes.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//flywaydb.org/documentation/gradle/migrate.html">Executing Flyway Migrations with Gradle</a></li>
<li><a href="//docs.oracle.com/javase/tutorial/jdbc/basics/index.html">JDBC Basics</a></li>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html">JPA Entities Definition</a></li>
</ul>
</div><div data-title="Vacation Property Model" data-file="src/main/java/org/twilio/airtng/models/VacationProperty.java" data-highlight="7-37" class="step"><h2 id="vacation-property-model">Vacation Property Model</h2>
<p>In order to build a true vacation rental company we&#39;ll need a way to
create the property&#39;s listing.</p>
<p>The <code>VacationProperty</code> model belongs to the <code>User</code> who created it
(we&#39;ll call this user the <em>host</em> moving forward) and contains only two
properties: a <code>description</code> and an <code>imageUrl</code>.</p>
<p>The model has two associations implemented, there are many reservations in it,
and many users can go through those reservations.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#bnbqh">JPA Entities Relations</a></li>
</ul>
</div><div data-title="The Reservation Model" data-file="src/main/java/org/twilio/airtng/models/Reservation.java" data-highlight="5-37" class="step"><h2 id="the-reservation-model">The Reservation Model</h2>
<p>The <code>Reservation</code> model is at the center of the workflow for this application.
It is responsible for keeping track of:</p>
<ul>
<li>The <code>vacationProperty</code> it is associated with.</li>
<li>The guest <code>user</code> who performed the reservation.</li>
<li>The status of the reservation.</li>
</ul>
</div><div data-title="Reservation Creation" data-file="src/main/java/org/twilio/airtng/servlets/ReservationServlet.java" data-highlight="45-67" class="step"><h2 id="reservation-creation">Reservation Creation</h2>
<p>The reservation creation form holds only one field, the message that will
be sent to the <em>host</em> user when reserving one of his properties. The rest
of the information necessary to create a reservation is taken from the user
that is logged into the system and also the relationship between a property
and it&#39;s owner. Have a look at our base generic
<a href="//github.com/TwilioDevEd/airtng-servlets/blob/eac1e32c4d2eb2071ef00f4e6b7b78b33cdcc541/src/main/java/org/twilio/airtng/repositories/Repository.java#L53-L66"><code>Repository</code></a>,
which is in charge of handling entities&#39; insertion.</p>
<p>A reservation is created with a default status <code>pending</code>, so when the <em>host</em>
replies with a <code>confirm</code> or <code>reject</code> response. The system knows which reservation
the <em>host</em> is referring to.</p>
<p>In the next step we&#39;ll take a look at how the SMS notification is sent to
the host when the reservation is created.</p>
</div><div data-title="Notifying the Host" data-file="src/main/java/org/twilio/airtng/lib/sms/Sender.java" data-highlight="24-32" class="step"><h2 id="notifying-the-host">Notifying the Host</h2>
<p>When a reservation is created for a property, we want to notify the owner
that someone has made a reservation. For this purpose we use
an abstraction called <a href="//github.com/TwilioDevEd/airtng-servlets/blob/eac1e32c4d2eb2071ef00f4e6b7b78b33cdcc541/src/main/java/org/twilio/airtng/lib/notifications/SmsNotifier.java"><code>SmsNotifier</code></a>
, which uses, under the hood, another abstraction called <code>Sender</code>.
Here is where we use <a href="https://www.twilio.com/docs/quickstart/java/sms/sending-via-rest">Twilio&#39;s Rest
API</a>
to send an SMS message to the <em>host</em>, using your <a href="//www.twilio.com/user/account/phone-numbers/incoming">Twilio phone
number</a>.</p>
<p>As you can see, sending SMS messages using Twilio is as easy as the code
to your right shows. Now we just have to wait for the host to send an SMS
response, accepting or rejecting the reservation, so we can notify the guest
and host that the reservation information is updated accordingly.</p>
<p>The next step shows how to handle and configure the host&#39;s SMS response.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/rest">Twilio Rest API</a></li>
<li><a href="//www.twilio.com/docs/java/install">Twilio Java helper library</a></li>
</ul>
</div><div data-title="Handling Incoming Messages" data-file="src/main/java/org/twilio/airtng/servlets/ReservationConfirmationServlet.java" data-highlight="35-72" class="step"><h2 id="handling-incoming-messages">Handling Incoming Messages</h2>
<p>Let&#39;s take a closer look at the <code>ReservationConfirmation</code> servlet. This servlet
handles our incoming Twilio request and does three things:</p>
<ol>
<li>Checks for a pending reservation from the incoming user.</li>
<li>Updates the status of the reservation.</li>
<li>Responds to the host and sends notification to the guest.</li>
</ol>
</div><div data-title="Incoming Twilio Request" data-file="src/main/java/org/twilio/airtng/servlets/ReservationConfirmationServlet.java" data-highlight="35-72" class="step"><h2 id="incoming-twilio-request">Incoming Twilio Request</h2>
<p>In your <a href="//www.twilio.com/user/account/phone-numbers/incoming">Twilio number</a>
you must setup the SMS webhook to call your
application&#39;s end point in the route <code>/reservation-confirmation</code>. Remember to
to expose your development machine to the outside world using
<a href="//ngrok.com/">ngrok</a>. So, your URL for the SMS webhook on your number
should look like this:</p>
<p><code>http://&lt;subdomain&gt;.ngrok.io/reservation-confirmation</code></p>
<p>An incoming request from Twilio comes with some helpful
<a href="//www.twilio.com/docs/api/twiml/sms/twilio_request#request-parameters">parameters</a>.
These include the <code>From</code> phone number and the message <code>Body</code>.</p>
<p>We&#39;ll use the <code>From</code> parameter to lookup the host and check if he/she has any
pending reservations. If he/she does, we&#39;ll use the message body to check if there are
accepted or rejected reservations. Then, we update the reservation status and
use the <code>SmsNotifier</code> abstraction to send an SMS to the <em>guest</em> notifying him the
the decision the host made, regarding the property reservation.</p>
</div><div data-title="TwiML Response" data-file="src/main/java/org/twilio/airtng/servlets/ReservationConfirmationServlet.java" data-highlight="35-72" class="step"><h2 id="twiml-response">TwiML Response</h2>
<p>Finally, we&#39;ll use Twilio&#39;s TwiML as a response to Twilio&#39;s server
instructing it to send SMS notification message to the <em>host</em>, specifically the
<a href="//www.twilio.com/docs/quickstart/java/sms/replying-to-sms-messages"><code>Message</code></a>
verb from TwiML to instruct Twilio&#39;s server that it should send the message.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/quickstart/java/sms/hello-monkey">Java Quickstart: Respond to an incoming SMS</a></li>
</ul>
</div><div data-title="Finish" class="step"><h2 id="all-done">All Done</h2>
<p>Congrats! You just learned how to automate your workflow with Twilio SMS.</p>
<p>To improve upon this you could add anonymous communications so that the host
and guest could communicate through a shared Twilio phone number.
Hmm... maybe we&#39;ll have to put together a tutorial on that!</p>
<p>If you&#39;re a Java developer working with Twilio, you might enjoy these
other tutorials:</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/server-notifications/java/servlets"><strong>SMS and MMS notifications</strong></a></p>
<p>Build a server notification system that will alert all administrators via SMS when a server outage occurs.</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/click-to-call/java/servlets"><strong>Click To Call</strong></a></p>
<p>Convert web traffic into phone calls with the click of a button.</p>
<h3 id="did-this-help-">Did this help?</h3>
<p>Thanks for checking this tutorial out! If you have any feedback to share
with us, we&#39;d love to hear it. <a href="mailto:deved-oss@twilio.com">Contact the Twilio Developer Education Team</a> to let us know what you think.</p>
<p><img src="http://howtodocs.s3.amazonaws.com/airtng-screen2.png" alt="Airtng"></p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="src/main/webapp/WEB-INF/web.xml" data-mode="xml">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCjx3ZWItYXBwIHhtbG5zPSJodHRwOi8vamF2YS5zdW4uY29tL3htbC9ucy9qYXZhZWUiCiAgICAgICAgIHhtbG5zOnhzaT0iaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UiCiAgICAgICAgIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL2phdmEuc3VuLmNvbS94bWwvbnMvamF2YWVlIGh0dHA6Ly9qYXZhLnN1bi5jb20veG1sL25zL2phdmFlZS93ZWItYXBwXzNfMC54c2QiCiAgICAgICAgIHZlcnNpb249IjMuMCI+CgogICAgPGNvbnRleHQtcGFyYW0+CiAgICAgICAgPHBhcmFtLW5hbWU+anNwLWluaGVyaXRhbmNlLXByZWZpeDwvcGFyYW0tbmFtZT4KICAgICAgICA8cGFyYW0tdmFsdWU+L1dFQi1JTkYvbGF5b3V0cy88L3BhcmFtLXZhbHVlPgogICAgPC9jb250ZXh0LXBhcmFtPgoKICAgIDxjb250ZXh0LXBhcmFtPgogICAgICAgIDxwYXJhbS1uYW1lPmpzcC1pbmhlcml0YW5jZS1zdWZmaXg8L3BhcmFtLW5hbWU+CiAgICAgICAgPHBhcmFtLXZhbHVlPi5qc3A8L3BhcmFtLXZhbHVlPgogICAgPC9jb250ZXh0LXBhcmFtPgoKICAgIDx3ZWxjb21lLWZpbGUtbGlzdD4KICAgICAgICA8d2VsY29tZS1maWxlPnJlZ2lzdHJhdGlvbi5qc3A8L3dlbGNvbWUtZmlsZT4KICAgIDwvd2VsY29tZS1maWxlLWxpc3Q+CgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5yZWdpc3RyYXRpb248L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5vcmcudHdpbGlvLmFpcnRuZy5zZXJ2bGV0cy5SZWdpc3RyYXRpb25TZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5sb2dpbjwvc2VydmxldC1uYW1lPgogICAgICAgIDxzZXJ2bGV0LWNsYXNzPm9yZy50d2lsaW8uYWlydG5nLnNlcnZsZXRzLkxvZ2luU2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KICAgIDxzZXJ2bGV0PgogICAgICAgIDxzZXJ2bGV0LW5hbWU+aG9tZTwvc2VydmxldC1uYW1lPgogICAgICAgIDxzZXJ2bGV0LWNsYXNzPm9yZy50d2lsaW8uYWlydG5nLnNlcnZsZXRzLkhvbWVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT52YWNhdGlvblByb3BlcnRpZXM8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5vcmcudHdpbGlvLmFpcnRuZy5zZXJ2bGV0cy5WYWNhdGlvblByb3BlcnRpZXNTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5uZXdWYWNhdGlvblByb3BlcnRpZXM8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5vcmcudHdpbGlvLmFpcnRuZy5zZXJ2bGV0cy5OZXdWYWNhdGlvblByb3BlcnRpZXNTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5yZXNlcnZhdGlvbjwvc2VydmxldC1uYW1lPgogICAgICAgIDxzZXJ2bGV0LWNsYXNzPm9yZy50d2lsaW8uYWlydG5nLnNlcnZsZXRzLlJlc2VydmF0aW9uU2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KICAgIDxzZXJ2bGV0PgogICAgICAgIDxzZXJ2bGV0LW5hbWU+bG9nb3V0PC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHNlcnZsZXQtY2xhc3M+b3JnLnR3aWxpby5haXJ0bmcuc2VydmxldHMuTG9nb3V0U2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KICAgIDxzZXJ2bGV0PgogICAgICAgIDxzZXJ2bGV0LW5hbWU+L3Jlc2VydmF0aW9uQ29uZmlybWF0aW9uPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHNlcnZsZXQtY2xhc3M+b3JnLnR3aWxpby5haXJ0bmcuc2VydmxldHMuUmVzZXJ2YXRpb25Db25maXJtYXRpb25TZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgoKICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5yZWdpc3RyYXRpb248L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L3JlZ2lzdGVyPC91cmwtcGF0dGVybj4KICAgIDwvc2VydmxldC1tYXBwaW5nPgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPmxvZ2luPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHVybC1wYXR0ZXJuPi9sb2dpbjwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5ob21lPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHVybC1wYXR0ZXJuPi9ob21lPC91cmwtcGF0dGVybj4KICAgIDwvc2VydmxldC1tYXBwaW5nPgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPnZhY2F0aW9uUHJvcGVydGllczwvc2VydmxldC1uYW1lPgogICAgICAgIDx1cmwtcGF0dGVybj4vcHJvcGVydGllczwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5uZXdWYWNhdGlvblByb3BlcnRpZXM8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L3Byb3BlcnRpZXMtbmV3PC91cmwtcGF0dGVybj4KICAgIDwvc2VydmxldC1tYXBwaW5nPgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPnJlc2VydmF0aW9uPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHVybC1wYXR0ZXJuPi9yZXNlcnZhdGlvbjwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5sb2dvdXQ8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2xvZ291dDwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT4vcmVzZXJ2YXRpb25Db25maXJtYXRpb248L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L3Jlc2VydmF0aW9uLWNvbmZpcm1hdGlvbjwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KCiAgICA8ZmlsdGVyPgogICAgICAgIDxmaWx0ZXItbmFtZT5BdXRoRmlsdGVyPC9maWx0ZXItbmFtZT4KICAgICAgICA8ZmlsdGVyLWNsYXNzPm9yZy50d2lsaW8uYWlydG5nLnNlcnZsZXRzLmZpbHRlcnMuQXV0aGVudGljYXRpb25GaWx0ZXI8L2ZpbHRlci1jbGFzcz4KICAgIDwvZmlsdGVyPgogICAgPGZpbHRlci1tYXBwaW5nPgogICAgICAgIDxmaWx0ZXItbmFtZT5BdXRoRmlsdGVyPC9maWx0ZXItbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2hvbWU8L3VybC1wYXR0ZXJuPgogICAgICAgIDx1cmwtcGF0dGVybj4vcmVzZXJ2YXRpb248L3VybC1wYXR0ZXJuPgogICAgICAgIDx1cmwtcGF0dGVybj4vcHJvcGVydGllczwvdXJsLXBhdHRlcm4+CiAgICAgICAgPHVybC1wYXR0ZXJuPi9wcm9wZXJ0aWVzLW5ldzwvdXJsLXBhdHRlcm4+CiAgICAgICAgPHVybC1wYXR0ZXJuPi9yZXNlcnZhdGlvbjwvdXJsLXBhdHRlcm4+CiAgICA8L2ZpbHRlci1tYXBwaW5nPgo8L3dlYi1hcHA+</textarea>
<textarea class="saurus-file" data-file="src/main/java/org/twilio/airtng/models/User.java" data-mode="java">cGFja2FnZSBvcmcudHdpbGlvLmFpcnRuZy5tb2RlbHM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCkBFbnRpdHkKQFRhYmxlKG5hbWUgPSAidXNlcnMiKQpwdWJsaWMgY2xhc3MgVXNlciB7CiAgICBASWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLklERU5USVRZKQogICAgQENvbHVtbihuYW1lID0gImlkIikKICAgIHByaXZhdGUgbG9uZyBpZDsKCiAgICBAQ29sdW1uKG5hbWUgPSAibmFtZSIpCiAgICBwcml2YXRlIFN0cmluZyBuYW1lOwoKICAgIEBDb2x1bW4obmFtZSA9ICJlbWFpbCIpCiAgICBwcml2YXRlIFN0cmluZyBlbWFpbDsKCiAgICBAQ29sdW1uKG5hbWUgPSAicGFzc3dvcmQiKQogICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7CgogICAgQENvbHVtbihuYW1lID0gInBob25lX251bWJlciIpCiAgICBwcml2YXRlIFN0cmluZyBwaG9uZU51bWJlcjsKCiAgICBAT25lVG9NYW55KG1hcHBlZEJ5PSJ1c2VyIikKICAgIHByaXZhdGUgTGlzdDxSZXNlcnZhdGlvbj4gcmVzZXJ2YXRpb25zOwoKICAgIEBPbmVUb01hbnkobWFwcGVkQnk9InVzZXIiKQogICAgcHJpdmF0ZSBMaXN0PFZhY2F0aW9uUHJvcGVydHk+IHZhY2F0aW9uUHJvcGVydGllczsKCiAgICBwdWJsaWMgVXNlcigpIHsKICAgICAgICB0aGlzLnJlc2VydmF0aW9ucyA9IG5ldyBBcnJheUxpc3Q8PigpOwogICAgICAgIHRoaXMudmFjYXRpb25Qcm9wZXJ0aWVzID0gbmV3IEFycmF5TGlzdDw+KCk7CiAgICB9CgogICAgcHVibGljIFVzZXIoCiAgICAgICAgICAgIFN0cmluZyBuYW1lLAogICAgICAgICAgICBTdHJpbmcgZW1haWwsCiAgICAgICAgICAgIFN0cmluZyBwYXNzd29yZCwKICAgICAgICAgICAgU3RyaW5nIHBob25lTnVtYmVyKSB7CiAgICAgICAgdGhpcygpOwogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsOwogICAgICAgIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDsKICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gcGhvbmVOdW1iZXI7CiAgICB9CgogICAgcHVibGljIGxvbmcgZ2V0SWQoKSB7CiAgICAgICAgcmV0dXJuIGlkOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldElkKGxvbmcgaWQpIHsKICAgICAgICB0aGlzLmlkID0gaWQ7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXROYW1lKCkgewogICAgICAgIHJldHVybiBuYW1lOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE5hbWUoU3RyaW5nIG5hbWUpIHsKICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0RW1haWwoKSB7CiAgICAgICAgcmV0dXJuIGVtYWlsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEVtYWlsKFN0cmluZyBlbWFpbCkgewogICAgICAgIHRoaXMuZW1haWwgPSBlbWFpbDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFBhc3N3b3JkKCkgewogICAgICAgIHJldHVybiBwYXNzd29yZDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRQYXNzd29yZChTdHJpbmcgcGFzc3dvcmQpIHsKICAgICAgICB0aGlzLnBhc3N3b3JkID0gcGFzc3dvcmQ7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRQaG9uZU51bWJlcigpIHsKICAgICAgICByZXR1cm4gcGhvbmVOdW1iZXI7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0UGhvbmVOdW1iZXIoU3RyaW5nIHBob25lTnVtYmVyKSB7CiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHBob25lTnVtYmVyOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGFkZFJlc2VydmF0aW9uKFJlc2VydmF0aW9uIHJlc2VydmF0aW9uKSB7CgogICAgICAgIGlmICh0aGlzLnJlc2VydmF0aW9ucy5hZGQocmVzZXJ2YXRpb24pICYmIHJlc2VydmF0aW9uLmdldFVzZXIoKSAhPSB0aGlzKSB7CiAgICAgICAgICAgIHJlc2VydmF0aW9uLnNldFVzZXIodGhpcyk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIHJlbW92ZVJlc2VydmF0aW9uKFJlc2VydmF0aW9uIHJlc2VydmF0aW9uKSB7CiAgICAgICAgaWYgKHRoaXMucmVzZXJ2YXRpb25zLnJlbW92ZShyZXNlcnZhdGlvbikgJiYgcmVzZXJ2YXRpb24uZ2V0VXNlcigpID09IHRoaXMpIHsKICAgICAgICAgICAgcmVzZXJ2YXRpb24uc2V0VXNlcihudWxsKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgYWRkVmFjYXRpb25Qcm9wZXJ0eShWYWNhdGlvblByb3BlcnR5IHZhY2F0aW9uUHJvcGVydHkpIHsKCiAgICAgICAgaWYgKHRoaXMudmFjYXRpb25Qcm9wZXJ0aWVzLmFkZCh2YWNhdGlvblByb3BlcnR5KSAmJiB2YWNhdGlvblByb3BlcnR5LmdldFVzZXIoKSAhPSB0aGlzKSB7CiAgICAgICAgICAgIHZhY2F0aW9uUHJvcGVydHkuc2V0VXNlcih0aGlzKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVtb3ZlVmFjYXRpb25Qcm9wZXJ0eShWYWNhdGlvblByb3BlcnR5IHZhY2F0aW9uUHJvcGVydHkpIHsKICAgICAgICBpZiAodGhpcy5yZXNlcnZhdGlvbnMucmVtb3ZlKHZhY2F0aW9uUHJvcGVydHkpICYmIHZhY2F0aW9uUHJvcGVydHkuZ2V0VXNlcigpID09IHRoaXMpIHsKICAgICAgICAgICAgdmFjYXRpb25Qcm9wZXJ0eS5zZXRVc2VyKG51bGwpOwogICAgICAgIH0KICAgIH0KCn0=</textarea>
<textarea class="saurus-file" data-file="src/main/java/org/twilio/airtng/models/VacationProperty.java" data-mode="java">cGFja2FnZSBvcmcudHdpbGlvLmFpcnRuZy5tb2RlbHM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCkBFbnRpdHkKQFRhYmxlKG5hbWUgPSAidmFjYXRpb25fcHJvcGVydGllcyIpCnB1YmxpYyBjbGFzcyBWYWNhdGlvblByb3BlcnR5IHsKCiAgICBAamF2YXgucGVyc2lzdGVuY2UuSWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLklERU5USVRZKQogICAgQENvbHVtbihuYW1lID0gImlkIikKICAgIHByaXZhdGUgbG9uZyBpZDsKCiAgICBAQ29sdW1uKG5hbWUgPSAiZGVzY3JpcHRpb24iKQogICAgcHJpdmF0ZSBTdHJpbmcgZGVzY3JpcHRpb247CgogICAgQENvbHVtbihuYW1lID0gImltYWdlX3VybCIpCiAgICBwcml2YXRlIFN0cmluZyBpbWFnZVVybDsKCiAgICBAT25lVG9NYW55KG1hcHBlZEJ5ID0gInZhY2F0aW9uUHJvcGVydHkiKQogICAgcHJpdmF0ZSBMaXN0PFJlc2VydmF0aW9uPiByZXNlcnZhdGlvbnM7CgogICAgQE1hbnlUb09uZShmZXRjaCA9IEZldGNoVHlwZS5MQVpZKQogICAgQEpvaW5Db2x1bW4obmFtZSA9ICJ1c2VyX2lkIikKICAgIHByaXZhdGUgVXNlciB1c2VyOwoKICAgIHB1YmxpYyBWYWNhdGlvblByb3BlcnR5KCkgewogICAgICAgIHRoaXMucmVzZXJ2YXRpb25zID0gbmV3IEFycmF5TGlzdDxSZXNlcnZhdGlvbj4oKTsKICAgIH0KCiAgICBwdWJsaWMgVmFjYXRpb25Qcm9wZXJ0eShTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBpbWFnZVVybCwgVXNlciB1c2VyKSB7CiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uOwogICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBpbWFnZVVybDsKICAgICAgICB0aGlzLnVzZXIgPSB1c2VyOwogICAgfQoKICAgIHB1YmxpYyBsb25nIGdldElkKCkgewogICAgICAgIHJldHVybiBpZDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJZChsb25nIGlkKSB7CiAgICAgICAgdGhpcy5pZCA9IGlkOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7CiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldERlc2NyaXB0aW9uKFN0cmluZyBkZXNjcmlwdGlvbikgewogICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldEltYWdlVXJsKCkgewogICAgICAgIHJldHVybiBpbWFnZVVybDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRJbWFnZVVybChTdHJpbmcgaW1hZ2VVcmwpIHsKICAgICAgICB0aGlzLmltYWdlVXJsID0gaW1hZ2VVcmw7CiAgICB9CgogICAgcHVibGljIFVzZXIgZ2V0VXNlcigpIHsKICAgICAgICByZXR1cm4gdGhpcy51c2VyOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldFVzZXIoVXNlciB1c2VyKSB7CiAgICAgICAgdGhpcy51c2VyID0gdXNlcjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBhZGRSZXNlcnZhdGlvbihSZXNlcnZhdGlvbiByZXNlcnZhdGlvbikgewoKICAgICAgICBpZiAodGhpcy5yZXNlcnZhdGlvbnMuYWRkKHJlc2VydmF0aW9uKSAmJiByZXNlcnZhdGlvbi5nZXRWYWNhdGlvblByb3BlcnR5KCkgIT0gdGhpcykgewogICAgICAgICAgICByZXNlcnZhdGlvbi5zZXRWYWNhdGlvblByb3BlcnR5KHRoaXMpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCByZW1vdmVSZXNlcnZhdGlvbihSZXNlcnZhdGlvbiByZXNlcnZhdGlvbikgewogICAgICAgIGlmICh0aGlzLnJlc2VydmF0aW9ucy5yZW1vdmUocmVzZXJ2YXRpb24pICYmIHJlc2VydmF0aW9uLmdldFZhY2F0aW9uUHJvcGVydHkoKSA9PSB0aGlzKSB7CiAgICAgICAgICAgIHJlc2VydmF0aW9uLnNldFZhY2F0aW9uUHJvcGVydHkobnVsbCk7CiAgICAgICAgfQogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="src/main/java/org/twilio/airtng/models/Reservation.java" data-mode="java">cGFja2FnZSBvcmcudHdpbGlvLmFpcnRuZy5tb2RlbHM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsKCkBFbnRpdHkKQFRhYmxlKG5hbWUgPSAicmVzZXJ2YXRpb25zIikKcHVibGljIGNsYXNzIFJlc2VydmF0aW9uIHsKCiAgICBAamF2YXgucGVyc2lzdGVuY2UuSWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLklERU5USVRZKQogICAgQENvbHVtbihuYW1lID0gImlkIikKICAgIHByaXZhdGUgbG9uZyBpZDsKCiAgICBAQ29sdW1uKG5hbWUgPSAibWVzc2FnZSIpCiAgICBwcml2YXRlIFN0cmluZyBtZXNzYWdlOwoKICAgIEBDb2x1bW4obmFtZSA9ICJzdGF0dXMiKQogICAgcHJpdmF0ZSBJbnRlZ2VyIHN0YXR1czsKCiAgICBATWFueVRvT25lKGZldGNoID0gRmV0Y2hUeXBlLkxBWlkpCiAgICBASm9pbkNvbHVtbihuYW1lID0gInVzZXJfaWQiKQogICAgcHJpdmF0ZSBVc2VyIHVzZXI7CgogICAgQE1hbnlUb09uZShmZXRjaCA9IEZldGNoVHlwZS5MQVpZKQogICAgQEpvaW5Db2x1bW4obmFtZSA9ICJ2YWNhdGlvbl9wcm9wZXJ0eV9pZCIpCiAgICBwcml2YXRlIFZhY2F0aW9uUHJvcGVydHkgdmFjYXRpb25Qcm9wZXJ0eTsKCiAgICBwdWJsaWMgUmVzZXJ2YXRpb24oKSB7CiAgICB9CgogICAgcHVibGljIFJlc2VydmF0aW9uKFN0cmluZyBtZXNzYWdlLCBWYWNhdGlvblByb3BlcnR5IHZhY2F0aW9uUHJvcGVydHksIFVzZXIgdXNlcikgewogICAgICAgIHRoaXMoKTsKICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgICAgIHRoaXMudmFjYXRpb25Qcm9wZXJ0eSA9IHZhY2F0aW9uUHJvcGVydHk7CiAgICAgICAgdGhpcy51c2VyID0gdXNlcjsKICAgICAgICB0aGlzLnNldFN0YXR1cyhTdGF0dXMuUGVuZGluZyk7CiAgICB9CgogICAgcHVibGljIGxvbmcgZ2V0SWQoKSB7CiAgICAgICAgcmV0dXJuIGlkOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldElkKGxvbmcgaWQpIHsKICAgICAgICB0aGlzLmlkID0gaWQ7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRNZXNzYWdlKCkgewogICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldE1lc3NhZ2UoU3RyaW5nIG1lc3NhZ2UpIHsKICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlOwogICAgfQoKICAgIHB1YmxpYyBTdGF0dXMgZ2V0U3RhdHVzKCkgewogICAgICAgIHJldHVybiBTdGF0dXMuZ2V0VHlwZSh0aGlzLnN0YXR1cyk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0U3RhdHVzKFN0YXR1cyBzdGF0dXMpIHsKICAgICAgICBpZiAoc3RhdHVzID09IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBudWxsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzLmdldFZhbHVlKCk7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBWYWNhdGlvblByb3BlcnR5IGdldFZhY2F0aW9uUHJvcGVydHkoKSB7CiAgICAgICAgcmV0dXJuIHZhY2F0aW9uUHJvcGVydHk7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0VmFjYXRpb25Qcm9wZXJ0eShWYWNhdGlvblByb3BlcnR5IHZhY2F0aW9uUHJvcGVydHkpIHsKICAgICAgICB0aGlzLnZhY2F0aW9uUHJvcGVydHkgPSB2YWNhdGlvblByb3BlcnR5OwogICAgfQoKICAgIHB1YmxpYyBVc2VyIGdldFVzZXIoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudXNlcjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVc2VyKFVzZXIgdXNlcikgewogICAgICAgIHRoaXMudXNlciA9IHVzZXI7CiAgICB9CgogICAgcHVibGljIHZvaWQgcmVqZWN0KCkgewogICAgICAgIHRoaXMuc2V0U3RhdHVzKFN0YXR1cy5SZWplY3RlZCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgY29uZmlybSgpIHsKICAgICAgICB0aGlzLnNldFN0YXR1cyhTdGF0dXMuQ29uZmlybWVkKTsKICAgIH0KCiAgICBwdWJsaWMgZW51bSBTdGF0dXMgewoKICAgICAgICBQZW5kaW5nKDApLCBDb25maXJtZWQoMSksIFJlamVjdGVkKDIpOwoKICAgICAgICBwcml2YXRlIGludCB2YWx1ZTsKCiAgICAgICAgU3RhdHVzKGludCB2YWx1ZSkgewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBwdWJsaWMgaW50IGdldFZhbHVlKCkgewogICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkgewogICAgICAgICAgICBzd2l0Y2ggKHZhbHVlKSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJwZW5kaW5nIjsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImNvbmZpcm1lZCI7CiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJyZWplY3RlZCI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICJWYWx1ZSBvdXQgb2YgcmFuZ2UiOwogICAgICAgIH0KCgogICAgICAgIHB1YmxpYyBzdGF0aWMgU3RhdHVzIGdldFR5cGUoSW50ZWdlciBpZCkgewoKICAgICAgICAgICAgaWYgKGlkID09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKFN0YXR1cyBzdGF0dXMgOiBTdGF0dXMudmFsdWVzKCkpIHsKICAgICAgICAgICAgICAgIGlmIChpZC5lcXVhbHMoc3RhdHVzLmdldFZhbHVlKCkpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1czsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJObyBtYXRjaGluZyB0eXBlIGZvciB2YWx1ZSAiICsgaWQpOwogICAgICAgIH0KICAgIH0KfQ==</textarea>
<textarea class="saurus-file" data-file="src/main/java/org/twilio/airtng/servlets/ReservationServlet.java" data-mode="java">cGFja2FnZSBvcmcudHdpbGlvLmFpcnRuZy5zZXJ2bGV0czsKCmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5saWIubm90aWZpY2F0aW9ucy5TbXNOb3RpZmllcjsKaW1wb3J0IG9yZy50d2lsaW8uYWlydG5nLmxpYi5zZXJ2bGV0cy5XZWJBcHBTZXJ2bGV0OwppbXBvcnQgb3JnLnR3aWxpby5haXJ0bmcubGliLndlYi5yZXF1ZXN0LnZhbGlkYXRvcnMuUmVxdWVzdFBhcmFtZXRlcnNWYWxpZGF0b3I7CmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5tb2RlbHMuUmVzZXJ2YXRpb247CmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5tb2RlbHMuVXNlcjsKaW1wb3J0IG9yZy50d2lsaW8uYWlydG5nLm1vZGVscy5WYWNhdGlvblByb3BlcnR5OwppbXBvcnQgb3JnLnR3aWxpby5haXJ0bmcucmVwb3NpdG9yaWVzLlJlc2VydmF0aW9uUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy50d2lsaW8uYWlydG5nLnJlcG9zaXRvcmllcy5Vc2VyUmVwb3NpdG9yeTsKaW1wb3J0IG9yZy50d2lsaW8uYWlydG5nLnJlcG9zaXRvcmllcy5WYWNhdGlvblByb3BlcnRpZXNSZXBvc2l0b3J5OwoKaW1wb3J0IGphdmF4LnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7CmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CgpwdWJsaWMgY2xhc3MgUmVzZXJ2YXRpb25TZXJ2bGV0IGV4dGVuZHMgV2ViQXBwU2VydmxldCB7CgogICAgcHJpdmF0ZSBmaW5hbCBWYWNhdGlvblByb3BlcnRpZXNSZXBvc2l0b3J5IHZhY2F0aW9uUHJvcGVydGllc1JlcG9zaXRvcnk7CiAgICBwcml2YXRlIGZpbmFsIFJlc2VydmF0aW9uUmVwb3NpdG9yeSByZXNlcnZhdGlvblJlcG9zaXRvcnk7CiAgICBwcml2YXRlIFVzZXJSZXBvc2l0b3J5IHVzZXJSZXBvc2l0b3J5OwogICAgcHJpdmF0ZSBTbXNOb3RpZmllciBzbXNOb3RpZmllcjsKCiAgICBwdWJsaWMgUmVzZXJ2YXRpb25TZXJ2bGV0KCkgewogICAgICAgIHRoaXMobmV3IFZhY2F0aW9uUHJvcGVydGllc1JlcG9zaXRvcnkoKSwgbmV3IFJlc2VydmF0aW9uUmVwb3NpdG9yeSgpLCBuZXcgVXNlclJlcG9zaXRvcnkoKSwgbmV3IFNtc05vdGlmaWVyKCkpOwogICAgfQoKICAgIHB1YmxpYyBSZXNlcnZhdGlvblNlcnZsZXQoVmFjYXRpb25Qcm9wZXJ0aWVzUmVwb3NpdG9yeSB2YWNhdGlvblByb3BlcnRpZXNSZXBvc2l0b3J5LCBSZXNlcnZhdGlvblJlcG9zaXRvcnkgcmVzZXJ2YXRpb25SZXBvc2l0b3J5LCBVc2VyUmVwb3NpdG9yeSB1c2VyUmVwb3NpdG9yeSwgU21zTm90aWZpZXIgc21zTm90aWZpZXIpIHsKICAgICAgICBzdXBlcigpOwogICAgICAgIHRoaXMudmFjYXRpb25Qcm9wZXJ0aWVzUmVwb3NpdG9yeSA9IHZhY2F0aW9uUHJvcGVydGllc1JlcG9zaXRvcnk7CiAgICAgICAgdGhpcy5yZXNlcnZhdGlvblJlcG9zaXRvcnkgPSByZXNlcnZhdGlvblJlcG9zaXRvcnk7CiAgICAgICAgdGhpcy51c2VyUmVwb3NpdG9yeSA9IHVzZXJSZXBvc2l0b3J5OwogICAgICAgIHRoaXMuc21zTm90aWZpZXIgPSBzbXNOb3RpZmllcjsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKQogICAgICAgICAgICB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24gewoKICAgICAgICBWYWNhdGlvblByb3BlcnR5IHZhY2F0aW9uUHJvcGVydHkgPSB2YWNhdGlvblByb3BlcnRpZXNSZXBvc2l0b3J5LmZpbmQoTG9uZy5wYXJzZUxvbmcocmVxdWVzdC5nZXRQYXJhbWV0ZXIoImlkIikpKTsKICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZSgidmFjYXRpb25Qcm9wZXJ0eSIsIHZhY2F0aW9uUHJvcGVydHkpOwogICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoIi9yZXNlcnZhdGlvbi5qc3AiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkKICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHsKCiAgICAgICAgc3VwZXIuZG9Qb3N0KHJlcXVlc3QsIHJlc3BvbnNlKTsKCiAgICAgICAgU3RyaW5nIG1lc3NhZ2UgPSBudWxsOwogICAgICAgIFZhY2F0aW9uUHJvcGVydHkgdmFjYXRpb25Qcm9wZXJ0eSA9IG51bGw7CgogICAgICAgIGlmIChpc1ZhbGlkUmVxdWVzdCgpKSB7CiAgICAgICAgICAgIG1lc3NhZ2UgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigibWVzc2FnZSIpOwogICAgICAgICAgICBTdHJpbmcgcHJvcGVydHlJZCA9IHJlcXVlc3QuZ2V0UGFyYW1ldGVyKCJwcm9wZXJ0eUlkIik7CiAgICAgICAgICAgIHZhY2F0aW9uUHJvcGVydHkgPSB2YWNhdGlvblByb3BlcnRpZXNSZXBvc2l0b3J5LmZpbmQoTG9uZy5wYXJzZUxvbmcocHJvcGVydHlJZCkpOwoKICAgICAgICAgICAgVXNlciBjdXJyZW50VXNlciA9IHVzZXJSZXBvc2l0b3J5LmZpbmQoc2Vzc2lvbk1hbmFnZXIuZ2V0KCkuZ2V0TG9nZ2VkVXNlcklkKHJlcXVlc3QpKTsKICAgICAgICAgICAgUmVzZXJ2YXRpb24gcmVzZXJ2YXRpb24gPSByZXNlcnZhdGlvblJlcG9zaXRvcnkuY3JlYXRlKG5ldyBSZXNlcnZhdGlvbihtZXNzYWdlLCB2YWNhdGlvblByb3BlcnR5LCBjdXJyZW50VXNlcikpOwogICAgICAgICAgICBzbXNOb3RpZmllci5ub3RpZnlIb3N0KHJlc2VydmF0aW9uKTsKICAgICAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KCIvcHJvcGVydGllcyIpOwogICAgICAgIH0KICAgICAgICBwcmVzZXJ2ZVN0YXR1c1JlcXVlc3QocmVxdWVzdCwgbWVzc2FnZSwgdmFjYXRpb25Qcm9wZXJ0eSk7CiAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcigiL3Jlc2VydmF0aW9uLmpzcCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIGJvb2xlYW4gaXNWYWxpZFJlcXVlc3QoUmVxdWVzdFBhcmFtZXRlcnNWYWxpZGF0b3IgdmFsaWRhdG9yKSB7CgogICAgICAgIHJldHVybiB2YWxpZGF0b3IudmFsaWRhdGVQcmVzZW5jZSgibWVzc2FnZSIpOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBwcmVzZXJ2ZVN0YXR1c1JlcXVlc3QoCiAgICAgICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LAogICAgICAgICAgICBTdHJpbmcgbWVzc2FnZSwgT2JqZWN0IHZhY2F0aW9uUHJvcGVydHkpIHsKICAgICAgICByZXF1ZXN0LnNldEF0dHJpYnV0ZSgibWVzc2FnZSIsIG1lc3NhZ2UpOwogICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKCJ2YWNhdGlvblByb3BlcnR5IiwgdmFjYXRpb25Qcm9wZXJ0eSk7CiAgICB9Cn0K</textarea>
<textarea class="saurus-file" data-file="src/main/java/org/twilio/airtng/lib/sms/Sender.java" data-mode="java">cGFja2FnZSBvcmcudHdpbGlvLmFpcnRuZy5saWIuc21zOwoKaW1wb3J0IGNvbS50d2lsaW8uc2RrLlR3aWxpb1Jlc3RDbGllbnQ7CmltcG9ydCBjb20udHdpbGlvLnNkay5Ud2lsaW9SZXN0RXhjZXB0aW9uOwppbXBvcnQgb3JnLmFwYWNoZS5odHRwLk5hbWVWYWx1ZVBhaXI7CmltcG9ydCBvcmcuYXBhY2hlLmh0dHAubWVzc2FnZS5CYXNpY05hbWVWYWx1ZVBhaXI7CmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5saWIuQ29uZmlnOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCnB1YmxpYyBjbGFzcyBTZW5kZXIgewoKICAgIHByaXZhdGUgZmluYWwgVHdpbGlvUmVzdENsaWVudCBjbGllbnQ7CgogICAgcHVibGljIFNlbmRlcigpIHsKICAgICAgICBjbGllbnQgPSBuZXcgVHdpbGlvUmVzdENsaWVudChDb25maWcuZ2V0QWNjb3VudFNpZCgpLCBDb25maWcuZ2V0QXV0aFRva2VuKCkpOwogICAgfQoKICAgIHB1YmxpYyBTZW5kZXIoVHdpbGlvUmVzdENsaWVudCBjbGllbnQpIHsKICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZW5kKFN0cmluZyB0bywgU3RyaW5nIG1lc3NhZ2UpIHsKICAgICAgICBMaXN0PE5hbWVWYWx1ZVBhaXI+IHBhcmFtcyA9IGJ1aWxkUGFyYW1zKHRvLCBtZXNzYWdlKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY2xpZW50LmdldEFjY291bnQoKS5nZXRNZXNzYWdlRmFjdG9yeSgpLmNyZWF0ZShwYXJhbXMpOwogICAgICAgIH0gY2F0Y2ggKFR3aWxpb1Jlc3RFeGNlcHRpb24gZXhjZXB0aW9uKSB7CiAgICAgICAgICAgIGV4Y2VwdGlvbi5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBMaXN0PE5hbWVWYWx1ZVBhaXI+IGJ1aWxkUGFyYW1zKFN0cmluZyB0bywgU3RyaW5nIG1lc3NhZ2UpIHsKICAgICAgICBMaXN0PE5hbWVWYWx1ZVBhaXI+IHBhcmFtcyA9IG5ldyBBcnJheUxpc3Q8PigpOwoKICAgICAgICBwYXJhbXMuYWRkKG5ldyBCYXNpY05hbWVWYWx1ZVBhaXIoIlRvIiwgdG8pKTsKICAgICAgICBwYXJhbXMuYWRkKG5ldyBCYXNpY05hbWVWYWx1ZVBhaXIoIkZyb20iLCBDb25maWcuZ2V0UGhvbmVOdW1iZXIoKSkpOwogICAgICAgIHBhcmFtcy5hZGQobmV3IEJhc2ljTmFtZVZhbHVlUGFpcigiQm9keSIsIG1lc3NhZ2UpKTsKCiAgICAgICAgcmV0dXJuIHBhcmFtczsKICAgIH0KfQ==</textarea>
<textarea class="saurus-file" data-file="src/main/java/org/twilio/airtng/servlets/ReservationConfirmationServlet.java" data-mode="java">cGFja2FnZSBvcmcudHdpbGlvLmFpcnRuZy5zZXJ2bGV0czsKCmltcG9ydCBjb20udHdpbGlvLnNkay52ZXJicy5Ud2lNTEV4Y2VwdGlvbjsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLnZlcmJzLlR3aU1MUmVzcG9uc2U7CmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5saWIuaGVscGVycy5Ud2lNTEhlbHBlcjsKaW1wb3J0IG9yZy50d2lsaW8uYWlydG5nLmxpYi5ub3RpZmljYXRpb25zLlNtc05vdGlmaWVyOwppbXBvcnQgb3JnLnR3aWxpby5haXJ0bmcubGliLnNlcnZsZXRzLldlYkFwcFNlcnZsZXQ7CmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5tb2RlbHMuUmVzZXJ2YXRpb247CmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5tb2RlbHMuVXNlcjsKaW1wb3J0IG9yZy50d2lsaW8uYWlydG5nLnJlcG9zaXRvcmllcy5SZXNlcnZhdGlvblJlcG9zaXRvcnk7CmltcG9ydCBvcmcudHdpbGlvLmFpcnRuZy5yZXBvc2l0b3JpZXMuVXNlclJlcG9zaXRvcnk7CgppbXBvcnQgamF2YXguc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uOwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDsKaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKCnB1YmxpYyBjbGFzcyBSZXNlcnZhdGlvbkNvbmZpcm1hdGlvblNlcnZsZXQgZXh0ZW5kcyBXZWJBcHBTZXJ2bGV0IHsKCiAgICBwcml2YXRlIFVzZXJSZXBvc2l0b3J5IHVzZXJSZXBvc2l0b3J5OwogICAgcHJpdmF0ZSBSZXNlcnZhdGlvblJlcG9zaXRvcnkgcmVzZXJ2YXRpb25SZXBvc2l0b3J5OwogICAgcHJpdmF0ZSBTbXNOb3RpZmllciBzbXNOb3RpZmllcjsKCiAgICBwdWJsaWMgUmVzZXJ2YXRpb25Db25maXJtYXRpb25TZXJ2bGV0KCkgewogICAgICAgIHRoaXMobmV3IFVzZXJSZXBvc2l0b3J5KCksIG5ldyBSZXNlcnZhdGlvblJlcG9zaXRvcnkoKSwgbmV3IFNtc05vdGlmaWVyKCkpOwogICAgfQoKICAgIHB1YmxpYyBSZXNlcnZhdGlvbkNvbmZpcm1hdGlvblNlcnZsZXQoVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnksIFJlc2VydmF0aW9uUmVwb3NpdG9yeSByZXNlcnZhdGlvblJlcG9zaXRvcnksIFNtc05vdGlmaWVyIHNtc05vdGlmaWVyKSB7CiAgICAgICAgc3VwZXIoKTsKICAgICAgICB0aGlzLnVzZXJSZXBvc2l0b3J5ID0gdXNlclJlcG9zaXRvcnk7CiAgICAgICAgdGhpcy5yZXNlcnZhdGlvblJlcG9zaXRvcnkgPSByZXNlcnZhdGlvblJlcG9zaXRvcnk7CiAgICAgICAgdGhpcy5zbXNOb3RpZmllciA9IHNtc05vdGlmaWVyOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKSB0aHJvd3MgSU9FeGNlcHRpb24sIFNlcnZsZXRFeGNlcHRpb24gewoKICAgICAgICBTdHJpbmcgcGhvbmUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiRnJvbSIpOwogICAgICAgIFN0cmluZyBzbXNDb250ZW50ID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoIkJvZHkiKTsKCiAgICAgICAgU3RyaW5nIHNtc1Jlc3BvbnNlVGV4dCA9ICJTb3JyeSwgaXQgbG9va3MgbGlrZSB5b3UgZG9uJ3QgaGF2ZSBhbnkgcmVzZXJ2YXRpb25zIHRvIHJlc3BvbmQgdG8uIjsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgVXNlciB1c2VyID0gdXNlclJlcG9zaXRvcnkuZmluZEJ5UGhvbmVOdW1iZXIocGhvbmUpOwogICAgICAgICAgICBSZXNlcnZhdGlvbiByZXNlcnZhdGlvbiA9IHJlc2VydmF0aW9uUmVwb3NpdG9yeS5maW5kRmlyc3RQZW5kYW50UmVzZXJ2YXRpb25zQnlVc2VyKHVzZXIuZ2V0SWQoKSk7CiAgICAgICAgICAgIGlmIChyZXNlcnZhdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBpZiAoc21zQ29udGVudC5jb250YWlucygieWVzIikgfHwgc21zQ29udGVudC5jb250YWlucygiYWNjZXB0IikpCiAgICAgICAgICAgICAgICAgICAgcmVzZXJ2YXRpb24uY29uZmlybSgpOwogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHJlc2VydmF0aW9uLnJlamVjdCgpOwogICAgICAgICAgICAgICAgcmVzZXJ2YXRpb25SZXBvc2l0b3J5LnVwZGF0ZShyZXNlcnZhdGlvbik7CgogICAgICAgICAgICAgICAgc21zUmVzcG9uc2VUZXh0ID0gU3RyaW5nLmZvcm1hdCgiWW91IGhhdmUgc3VjY2Vzc2Z1bGx5ICVzIHRoZSByZXNlcnZhdGlvbiIsIHJlc2VydmF0aW9uLmdldFN0YXR1cygpLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgc21zTm90aWZpZXIubm90aWZ5R3Vlc3QocmVzZXJ2YXRpb24pOwogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJlc3BvbmRTbXMocmVzcG9uc2UsIHNtc1Jlc3BvbnNlVGV4dCk7CiAgICAgICAgfSBjYXRjaCAoVHdpTUxFeGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBwcml2YXRlIHZvaWQgcmVzcG9uZFNtcyhIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlLCBTdHJpbmcgbWVzc2FnZSkKICAgICAgICAgICAgdGhyb3dzIFR3aU1MRXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7CiAgICAgICAgVHdpTUxSZXNwb25zZSB0d2lNTFJlc3BvbnNlID0gVHdpTUxIZWxwZXIuYnVpbGRTbXNSZXNwb25kKG1lc3NhZ2UpOwogICAgICAgIHJlc3BvbnNlLnNldENvbnRlbnRUeXBlKCJ0ZXh0L3htbCIpOwogICAgICAgIHJlc3BvbnNlLmdldFdyaXRlcigpLndyaXRlKHR3aU1MUmVzcG9uc2UudG9YTUwoKSk7CiAgICB9Cn0K</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/airtng-servlets" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>